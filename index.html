<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Monad Staking</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.7.0/dist/ethers.umd.min.js"></script>
  <style>
    body { font-family: sans-serif; padding: 30px; background: #f5f5f5; }
    input { padding: 6px; margin-right: 10px; }
    button { padding: 6px 14px; margin-top: 10px; }
  </style>
</head>
<body>
  <h2>ðŸª™ Monad Staking App</h2>

  <p><strong>Connected wallet:</strong> <span id="wallet">Not connected</span></p>

  <p><strong>Staking Contract:</strong> <span id="contractAddress">[PASTE_STAKING_CONTRACT]</span></p>

  <div>
    <input type="number" id="amount" placeholder="Amount to stake/unstake" />
    <br>
    <button onclick="stake()">Stake</button>
    <button onclick="unstake()">Unstake</button>
  </div>

  <p><strong>Your staked balance:</strong> <span id="stakedBalance">0</span></p>

  <script>
    const stakingContractAddress = "[PASTE_STAKING_CONTRACT]";
    const stakingABI = [
      "function stake(uint256 _amount) external",
      "function unstake(uint256 _amount) external",
      "function myStakedBalance(address user) view returns (uint256)"
    ];

    let signer, stakingContract;

    async function connectWallet() {
      if (typeof window.ethereum === 'undefined') {
        alert("Please install MetaMask or OKX Wallet");
        return;
      }

      const provider = new ethers.BrowserProvider(window.ethereum);
      const accounts = await provider.send("eth_requestAccounts", []);
      signer = await provider.getSigner();
      document.getElementById("wallet").innerText = accounts[0];

      stakingContract = new ethers.Contract(stakingContractAddress, stakingABI, signer);
      updateBalance();
    }

    async function stake() {
      const amount = document.getElementById("amount").value;
      if (!amount) return alert("Enter amount");

      try {
        const tx = await stakingContract.stake(ethers.parseUnits(amount, 18));
        await tx.wait();
        alert("Staked!");
        updateBalance();
      } catch (err) {
        console.error(err);
        alert("Stake failed");
      }
    }

    async function unstake() {
      const amount = document.getElementById("amount").value;
      if (!amount) return alert("Enter amount");

      try {
        const tx = await stakingContract.unstake(ethers.parseUnits(amount, 18));
        await tx.wait();
        alert("Unstaked!");
        updateBalance();
      } catch (err) {
        console.error(err);
        alert("Unstake failed");
      }
    }

    async function updateBalance() {
      const address = await signer.getAddress();
      const balance = await stakingContract.myStakedBalance(address);
      document.getElementById("stakedBalance").innerText = ethers.formatUnits(balance, 18);
    }

    connectWallet();
  </script>
</body>
</html>
